<div class="w3-card-4">
	<header class="w3-container w3-{{projectDetails.color}}">
		<h5>
			<button ng-if="projectDetails.isMyProject" class="w3-btn w3-ripple w3-right w3-border w3-black header-button"
			        ui-sref="myProjects">
				<i class="fa fa-chevron-circle-left"></i> Back
			</button>
			<button ng-if="!projectDetails.isMyProject" class="w3-btn w3-ripple w3-right w3-border w3-black header-button"
			        ui-sref="projects">
				<i class="fa fa-chevron-circle-left"></i> Back
			</button>
			<i class="fa fa-{{projectDetails.icon}} fa-fw"></i>
			{{projectDetails.pageTitle}} {{projectDetails.project.name}} ({{projectDetails.project.minPoints}}
			-{{projectDetails.project.maxPoints}} points)
		</h5>
	</header>

	<div
			class="w3-container w3-pale-{{projectDetails.color}} w3-border-{{projectDetails.color}} w3-leftbar w3-rightbar w3-bottombar">
		<div ng-if="projectDetails.isMyProject"
		     class="w3-panel w3-orange w3-card-8">
			<h3>Preview only</h3>
			<p>As owner you cannot reply for your project.</p>
		</div>
		<div ng-if="projectDetails.isResponsed.length > 0"
		     class="w3-panel w3-orange w3-card-8">
			<h3>Preview only</h3>
			<p>Already answered on this project.</p>
		</div>
		<h2>1. Please download and install
			<a target="_self" ng-href={{projectDetails.project.application}}>{{projectDetails.project.name}}</a> application.
		</h2>

		<h2>2. Please download and install <a href="https://lookback.io/download">LookBack</a> application.</h2>

		<h2>3. Please follow instructions and make videos:</h2>
		<textarea class="w3-input" disabled="true" rows="10"
		          ng-model="projectDetails.project.description">
		</textarea>
		<h2>4. Please complete the <a ng-href="{{projectDetails.project.surveyURL}}">survey</a> and sign it.</h2>
		<h2>5. Please upload your videos and tag them.</h2>

		<fieldset>
			<legend>
				<button ng-click="projectDetails.addNew()"
				        ng-disabled="projectDetails.isMyProject || projectDetails.isResponsed.length > 0">Add step
				</button>
			</legend>
			<form class="w3-container w3-padding-0">
				<input ng-disabled="projectDetails.isMyProject || projectDetails.isResponsed.length > 0"
				       class="w3-input" type="text"
				       ng-model="projectDetails.temp.movieTag"
				       placeholder="Movie tag">
				<input class="w3-input" type="text"
				       ng-model="projectDetails.temp.movieURL"
				       placeholder="Movie URL" disabled>

				<div class="w3-padding-0">

					<ul class="w3-navbar w3-light-green w3-border-bottom intronav">
						<li><a class="testbtn" ng-class="{'w3-green': projectDetails.importTab}" href="#"
						       ng-click="projectDetails.chooseTab('importTab')">Import from Lookback</a></li>
						<li><a class="testbtn" ng-class="{'w3-green': projectDetails.uploadTab}" href="#"
						       ng-click="projectDetails.chooseTab('uploadTab')">Upload from device</a></li>
					</ul>

					<div id="lookback" class="w3-light-grey" ng-show="projectDetails.importTab">

						<div class="w3-row w3-input" style="padding-bottom:0;padding-right:0; width: inherit">
							<button class="w3-button w3-col s3"
							        style="margin-right:8px;"
							        ng-disabled="projectDetails.isMyProject || projectDetails.isResponsed.length > 0"
							        ng-click="projectDetails.importFromURL()" style="float: left">Upload
							</button>
							<input ng-disabled="projectDetails.isMyProject || projectDetails.isResponsed.length > 0"
							       class="w3-padding w3-col s6" type="text"
							       style="margin-top:-8px;"
							       ng-model="projectDetails.temp.movieImportURL"
							       placeholder="Import Movie URL">
						</div>

						<div class="w3-accordion w3-light-grey">
							<button ng-click="projectDetails.tipToggleSlide()" class="w3-btn-block w3-orange"
							        style="padding-left: 0px; padding-right: 0px">
								<i class="fa fa-angle-double-down" aria-hidden="true"></i> Show tip <i class="fa fa-angle-double-down"
								                                                                       aria-hidden="true"></i>
							</button>
							<div id="tip" class="w3-accordion-content w3-center" ng-class="{'w3-show': projectDetails.tip}">
								<img style="width: 100%; height: auto;" src="/images/lookbackInstruction.png">
							</div>
						</div>
					</div>

					<div id="device" class="w3-container w3-padding-0 w3-light-grey" ng-show="projectDetails.uploadTab">
						<single-file-upload file="projectDetails.temp.movieURL" type="'video/*'" store="projectDetails.VideosStore"
						                    disabled="projectDetails.isMyProject || projectDetails.isResponsed.length > 0"></single-file-upload>
					</div>
				</div>

				<div ng-if="projectDetails.isStepRating">
						Evaluation of usability.
					<div ng-if="projectDetails.isMyProject || projectDetails.isResponsed.length > 0">
						<input-stars max="5" ng-model="projectDetails.temp.stars"
						             readonly></input-stars>
					</div>
					<div ng-if="!projectDetails.isMyProject && projectDetails.isResponsed.length == 0">
						<input-stars max="5" ng-model="projectDetails.temp.stars"></input-stars>
					</div>

				</div>
				<div ng-if="projectDetails.isStepDescription">
					<!--<textarea ng-model="step.description"></textarea>-->
					<textarea class="w3-input" rows="10"
					          ng-model="projectDetails.temp.description"
					          placeholder="Tell me your opinion about this step."
					          ng-disabled="projectDetails.isMyProject || projectDetails.isResponsed.length > 0"></textarea>
				</div>
			</form>
		</fieldset>


		<div class="w3-container" ng-if="!projectDetails.isMyProject || projectDetails.isResponsed.length === 0">
			<div ng-repeat="step in projectDetails.response.steps" class="w3-card-4">
				<header class="w3-container w3-{{projectDetails.color}}">
					<h3>{{step.movieTag}}
						<button ng-click="projectDetails.remove(step)">x</button>
					</h3>
				</header>
				<div ng-if="projectDetails.isStepRating">
					<input-stars max="5" ng-model="step.stars" readonly></input-stars>
				</div>
				<div ng-if="projectDetails.isStepDescription">
					<textarea ng-model="step.description" disabled="true"></textarea>
				</div>
				<video id="v" width="100%" height="auto"
				       controls crossOrigin="anonymous"
				>
					<source ng-src="{{step.movieURL}}">
				</video>
			</div>
		</div>

		<div>
			<button ng-disabled="projectDetails.isMyProject || projectDetails.isResponsed.length > 0"
			        class="w3-btn w3-ripple w3-border w3-{{projectDetails.color}}"
			        ng-click="projectDetails.confirm()">
				<i class="fa fa-{{projectDetails.icon}}"></i> Confirm
			</button>
		</div>

		<p>
		<div>
			<header class="w3-container w3-{{projectDetails.color}}">
				Responses:
			</header>
			<dynamic-table data="projectDetails.responses" columns="projectDetails.columns"></dynamic-table>
		</div>
		</p>

	</div>
</div>
